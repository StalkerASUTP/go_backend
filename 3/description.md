# Программа обработки данных - Задание 3 (Расширенная версия)

## Описание
Модифицированная консольная программа на Go с расширенными возможностями ввода данных и сохранения результатов. Программа может работать как с файлами, так и со стандартным вводом, а результаты сохраняет в указанный файл.

## Функциональность
Программа выполняет следующие операции:

1. **Гибкое чтение данных** - поддерживает два режима:
   - Чтение из JSON файла (`-mode json`)
   - Чтение из стандартного ввода (`-mode stdin`)
2. **Вычисление суммы** - подсчитывает общую сумму всех введенных чисел
3. **HTTP запрос** - выполняет GET запрос на указанный URL и проверяет код ответа
4. **Сохранение результатов** - записывает результаты в файл `result/result.txt`
5. **Логирование** - записывает детальные логи всех операций в `logs/data.log`

## Новые возможности (по сравнению с Заданием 2)
- **Командные аргументы** - режим работы задается через флаг `-mode`
- **Ввод с клавиатуры** - интерактивный ввод чисел через stdin
- **Сохранение в файл** - результаты сохраняются в отдельный файл
- **Расширенная конфигурация** - добавлена настройка пути к файлу результатов

## Использование

### Режим чтения из JSON файла:
```bash
go run cmd/main.go -mode json
```

### Режим интерактивного ввода:
```bash
go run cmd/main.go -mode stdin
```

## Архитектура
Программа использует те же принципы чистой архитектуры, что и в Задании 2, с добавлением:

- **Strategy Pattern** - для выбора способа чтения данных
- **Factory Method** - расширенная фабрика с поддержкой различных типов ридеров и райтеров
- **Interface Segregation** - добавлен интерфейс `DataWriter`

## Структура проекта
```
3/
├── cmd/main.go                         # Точка входа с парсингом флагов
├── internal/
│   ├── calculator/calculator.go        # Калькулятор для подсчета суммы
│   ├── config/config.go               # Расширенная конфигурация
│   ├── factory/factory.go             # Фабрика с поддержкой режимов
│   ├── http/client.go                 # HTTP клиент
│   ├── interfaces/interfaces.go       # Интерфейсы (+ DataWriter)
│   ├── logger/struct_logger.go        # Структурированный логгер
│   ├── reader/
│   │   ├── file_reader.go             # Чтение из JSON файла
│   │   └── stdin_reader.go            # Чтение из стандартного ввода
│   ├── writer/file_writer.go          # Запись результатов в файл
│   └── service/data_processor.go       # Расширенная бизнес-логика
├── json/data.json                      # Файл с исходными данными
├── logs/data.log                       # Файл логов
├── result/result.txt                   # Файл с результатами
└── go.mod                             # Модуль Go
```

## Конфигурация
Конфигурация загружается из переменных окружения (файл `.env`):

- `URL` - URL для HTTP запроса (по умолчанию: https://example.com)
- `JSON` - путь к JSON файлу с данными (по умолчанию: json/data.json)
- `LOGS` - путь к файлу логов (по умолчанию: logs/data.log)
- `RES` - путь к файлу результатов (по умолчанию: result/result.txt)

## Режимы работы

### JSON режим
Считывает данные из JSON файла в том же формате, что и в Задании 2:
```json
[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711]
```

### STDIN режим
Интерактивно запрашивает числа у пользователя:
```
Enter a number (or just Enter to finish): 10
Enter a number (or just Enter to finish): 20
Enter a number (or just Enter to finish): 30
Enter a number (or just Enter to finish): 
```

## Пример вывода
**В консоль:**
```
Total sum of numbers is: 46367
✅ SUCCESS: Host: example.com, Status: 200 OK
```

**В файл result/result.txt:**
```
Total sum of numbers is: 46367
✅ SUCCESS: Host: example.com, Status: 200 OK
```

## Обработка ошибок
Программа корректно обрабатывает все ошибки:
- Неподдерживаемые режимы работы
- Ошибки чтения файлов и стандартного ввода
- Ошибки создания и записи в файлы результатов
- Ошибки HTTP запросов
- Некорректный ввод данных в stdin режиме

Все ошибки детально логируются с указанием контекста и режима работы.